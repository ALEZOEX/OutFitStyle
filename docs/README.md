# Документация OutfitStyle

## Содержание
1. [Общее описание проекта](#общее-описание-проекта)
2. [Архитектура](#архитектура)
3. [Импорт данных Kaggle](#импорт-данных-kaggle)
4. [API документация](#api-документация)
5. [Развёртывание](#развёртывание)
6. [Контрибьютинг](#контрибьютинг)
7. [Кодекс поведения](#кодекс-поведения)

## Общее описание проекта

OutfitStyle - это приложение для подбора рекомендаций одежды на основе погоды, личных предпочтений и гардероба пользователя. В проекте реализована продвинутая архитектура с единым каталогом вещей и многоуровневой системой рекомендаций.

### Основные особенности:
- Интеграция с погодным API для получения актуальных данных
- ML-модель для подбора рекомендаций
- Поддержка Google Sign In
- Восстановление пароля
- Персонализированные рекомендации

## Архитектура

### Единая модель вещей

Все вещи теперь хранятся в одной таблице `clothing_items` с расширенными атрибутами:
- `gender` - пол (Men, Women, Unisex, Boys, Girls)
- `master_category` - основная категория (Apparel, Accessory, Footwear и т.д.)
- `subcategory` - подкатегория (Tshirts, Jeans, Dresses и т.д.)
- `season` - сезон (Spring, Summer, Fall, Winter)
- `base_colour` - базовый цвет
- `usage` - использование (Casual, Formal, Sports и т.д.)
- `source` - источник (wardrobe, catalog, kaggle_seed, marketplace)
- `is_owned` - принадлежит ли пользователю
- `owner_user_id` - ID владельца (для личных вещей)

### Приоритеты источников данных

1. **Личный гардероб (wardrobe)** - вещи пользователя, если подходят по погоде
2. **Реальные новые вещи (catalog/marketplace)** - реальные товары
3. **Kaggle seed** - "образцовые" вещи из датасета для обучения

Для получения подробной информации об архитектуре смотрите [architecture.md](architecture.md).

## Импорт данных Kaggle

Для импорта датасета из Kaggle используется скрипт `scripts/import_kaggle_styles.py`, который:

1. Читает `styles.csv` с пропуском кривых строк
2. Маппит категории в нашу систему
3. Вставляет данные в `clothing_items` с `source='kaggle_seed'`
4. Использует `ON CONFLICT (id) DO NOTHING` для предотвращения дубликатов

Для получения подробной информации о процессе импорта смотрите [import_guide.md](import_guide.md).

## API документация

API документация находится в файле [api_docs.md](api/README.md).

## Развёртывание

Проект разворачивается с помощью Docker и docker-compose. Файлы конфигурации находятся в корне проекта.

Для производства используйте `docker-compose.prod.yml`.

Для получения подробной информации о развёртывании смотрите [PRODUCTION_DEPLOYMENT.md](../PRODUCTION_DEPLOYMENT.md).

## Контрибьютинг

Для участия в разработке следуйте руководству [CONTRIBUTING.md](../CONTRIBUTING.md).

## Кодекс поведения

Все участники проекта должны следовать [CODE_OF_CONDUCT.md](../CODE_OF_CONDUCT.md).